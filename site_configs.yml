# Spider configurations for each website to be crawled
abcnews.go.com:
  site_name: 'abcnews.go.com'
  start_url: 'http://abcnews.go.com/Politics'
  follow_url_path: '/alerts/'
  article_url_path: '/Politics/.+/story\?id=\d*'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@rel="author"][contains(@class, "author")]/text()'
      match_rule: 'concatenate'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//span[@class="timestamp"]/text()'
      match_rule: 'single'
      datetime-format: 'MMM D, YYYY, h:mm A'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="article-copy"]'
      match_rule: 'single'

addictinginfo.com:
  site_name: 'addictinginfo.com'
  start_url: 'http://addictinginfo.com/category/news/'
  follow_url_path: 'page/'
  article_url_xpath: '//h2[@class="entry-title"]/a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//meta[@name="author"]/@content'
      match_rule: 'first'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[contains(concat(" ", normalize-space(@class), " "), " entry-date ")]/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry entry-content"]'
      match_rule: 'single'

breitbart.com:
  site_name: 'breitbart.com'
  start_url: 'https://www.breitbart.com/tag/politics/'
  follow_url_path: '/tag/'
  article_url_xpath: '//footer[contains(@class,"byline")]//a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//header/h1/text()'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//meta[@name="author"]/@content'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//footer[@class="byline"]/time/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'single'

conservativehq.com:
  site_name: 'conservativehq.com'
  start_url: 'http://conservativehq.com/exclusives'
  follow_url_path: 'exclusives'
  article_url_path: 'article/'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@class="field-item odd"]/text()'
      match_rule: 'first'
      warn_if_missing: False
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//div[@class="content"]/div[contains(concat(" ", normalize-space(@class), " "), " field ")]/div[contains(concat(" ", normalize-space(@class), " "), " field-items ")]/div[contains(concat(" ", normalize-space(@class), " "), " field-item ")]/text()'
      match_rule: 'single'
      datetime-format: 'MM/DD/YY'
      warn_if_missing: False
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="node"]/div[@class="content"]'
      match_rule: 'single'

dailykos.com:
  site_name: 'dailykos.com'
  start_url: 'https://www.dailykos.com/'
  follow_url_path: 'user'
  article_url_path: '/stor[ies|y]/\d\d\d\d/'
  method: 'index_page'
  obey_robots_txt: False
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//div[contains(@class, "author-byline")]/span[@class="author-name"]//a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//span[@class="timestamp "]/@data-epoch-time'
      datetime-format: 'unix_milliseconds'
      match_rule: 'first'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="story-intro story-content"]'
      match_rule: 'single'

davidwolfe.com:
  site_name: 'davidwolfe.com'
  start_url: 'https://www.davidwolfe.com/category/news/'
  follow_url_path: 'category/news/page/'
  article_url_xpath: '//h2[@class="entry-title"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'entry-content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//h1[@class="entry-title"]/text()'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="entry-author-name"]/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[contains(concat(" ", normalize-space(@class), " "), " entry-time ")]/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'single'

empirenews.net:
  site_name: 'empirenews.net'
  start_url: 'http://empirenews.net/category/politics/'
  follow_url_path: 'category/politics/page/'
  article_url_xpath: '//h1[@class="entry-title"]/a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//h1[@class="entry-title"]/text()'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="author vcard"]/a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[@class="entry-date published updated"]/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'single'

eyeopening.info:
  site_name: 'eyeopening.info'
  start_url: 'http://eyeopening.info/category/politics/'
  follow_url_path: 'category/politics/page/'
  article_url_xpath: '//h2[@class="entry-title"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'entry-content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'first'
      datetime-format: 'YYYY-MM-DD'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'first'

federalistpress.com:
  site_name: 'federalistpress.com'
  start_url: 'http://federalistpress.com/category/all-stories'
  follow_url_path: 'category/all-stories/page/'
  article_url_xpath: '//h2[@class="entry-title"]/a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@class="post-info"]//span[@class="author vcard"]//text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//span[@class="date published time"]/@title'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]//p'
      match_rule: 'group'

gellerreport.com:
  site_name: 'gellerreport.com'
  start_url: 'http://gellerreport.com/category/atlas-articles/'
  follow_url_path: 'category/atlas-articles/page/'
  article_url_xpath: '//h2[@class="archive-entry-title"]/a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//h1[@class="entry-title"]/text()'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@class="byline"]/a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[@class="post-entry-time"]/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'first'

globalresearch.ca:
  site_name: 'globalresearch.ca'
  start_url: 'http://globalresearch.ca/latest-news-and-top-stories'
  follow_url_path: 'latest-news-and-top-stories/page/'
  article_url_xpath: '//strong[@class="title"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//h2[@itemprop="headline"]/text()'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//meta[@itemprop="author"]/@content'
      match_rule: 'first'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'single'
      datetime-format: 'YYYY-MM-DD'
    content:
      select_method: 'xpath'
      select_expression: '//div[@itemprop="articleBody"]'
      match_rule: 'single'

henrymakow.com:
  site_name: 'henrymakow.com'
  start_url: 'http://henrymakow.com/archives.html'
  deny_url_regex: '/deutsche/'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'text-body'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="text-body"]'
      match_rule: 'single'
      warn_if_missing: False

liveaction.org:
  site_name: 'liveaction.org'
  start_url: 'https://liveaction.org/news/latest-stories/'
  follow_url_path: 'news/'
  article_url_xpath: '//h1[@itemprop="headline"]'
  method: 'index_page'
  article_element: 'div'
  article:
    content:
      select_method: 'xpath'
      select_expression: '//div[@id="content-main"]'
      match_rule: 'single'
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@itemprop="name"]/a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'single'

madworldnews.com:
  site_name: 'madworldnews.com'
  start_url: 'http://madworldnews.com/politics/'
  follow_url_path: 'politics/page/'
  article_url_xpath: '//h3[contains(concat(" ", normalize-space(@class), " "), " entry-title ")]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="entry-meta-author author vcard"]//a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[contains(concat(" ", normalize-space(@property), " "), " article:published_time ")]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[contains(@class, "entry-content")]/p'
      match_rule: 'group'

nbcnews.com:
  site_name: 'nbcnews.com'
  start_url: 'http://www.nbcnews.com/politics'
  follow_url_path: '/pages/'
  article_url_path: '/politics/[a-z\-]*/.*\d+$'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@class="founders-cond f6 lh-none"]/text()'
      match_rule: 'last'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//div/time[contains(@class, "pubDate")]/@datetime'
      match_rule: 'first'
      datetime-format: 'ddd MMM D YYYY HH:mm:ss'
    content:
      select_method: 'xpath'
      select_expression: '//div[contains(@class, "body")]/p[@class=""]'
      match_rule: 'group'

nytimes.com:
    site_name: 'nytimes.com'
    start_url: 'https://www.nytimes.com/section/politics'
    follow_url_path: 'pages/'
    article_url_path: '/\d\d\d\d/\d\d/\d\d/[us/politics/|world]'
    method: 'index_page'
    article:
      title:
        select_method: 'xpath'
        select_expression: '//meta[@property="og:title"]/@content'
        match_rule: 'single'
      byline:
        select_method: 'xpath'
        select_expression: '//p[contains(@itemprop, "author")]/a/span[@itemprop="name"]/text()'
        match_rule: 'single'
      publication_datetime:
        select_method: 'xpath'
        select_expression: '//meta[@property="article:published"]/@content'
        match_rule: 'single'
      content:
        select_method: 'xpath'
        select_expression: '//section[@name="articleBody"]'
        match_rule: 'single'

occupydemocrats.com:
  site_name: 'occupydemocrats.com'
  start_url: 'http://occupydemocrats.com'
  follow_url_path: 'page/'
  article_url_xpath: '//h3[@itemprop="headline"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'entry-content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="author-name vcard fn author"]/a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[@class="post-date updated"]/@datetime'
      match_rule: 'single'
      datetime-format: 'YYYY-MM-DD'
    content:
      select_method: 'xpath'
      select_expression: '//div[@itemprop="articleBody"]'
      match_rule: 'single'

palmerreport.com:
  site_name: 'palmerreport.com'
  start_url: 'https://palmerreport.com/category/analysis/'
  follow_url_path: 'category/analysis/page/'
  article_url_xpath: '//h2[@class="fl-post-title"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'fl-post-content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="fl-post-author"]/a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@itemprop="text"]'
      match_rule: 'single'

# TODO: Test from US IP address (get 403 from UK and Slovakia)
patriotnewsdaily.com:
  site_name: 'patriotnewsdaily.com'
  start_url: 'http://patriotnewsdaily.com/category/all-conservative-news/'
  follow_url_path: 'category/all-conservative-news/page/'
  article_url_xpath: '//h2[@class="post-title"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'entry'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'first'
    byline:
      select_method: 'xpath'
      select_expression: '//div[@class="vcard author"]//a/text()'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//span[@class="updated"]/text()'
      match_rule: 'single'
      datetime-format: 'YYYY-MM-DD'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry"]'
      match_rule: 'single'

prisonplanet.com:
  site_name: 'prisonplanet.com'
  start_url: 'http://prisonplanet.com/section/featured-stories/'
  follow_url_path: 'section/featured-stories/page/'
  article_url_xpath: '//div[@class="nArchiveHeader"]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'subarticle'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="subarticle"]'
      match_rule: 'single'

# TODO: Enhance spider to follow relative links
# -- JR: I think this is already done
redstatewatcher.com:
  site_name: 'redstatewatcher.com'
  start_url: 'http://redstatewatcher.com/news.asp'
  follow_url_path: 'news.asp\?page=\d*'
  article_url_path: 'article.asp\?id=\d*'
  metadata_source: 'microdata'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="container" and div[@class="row"]]'
      match_rule: 'single'

thinkprogress.org:
  site_name: 'thinkprogress.org'
  start_url: 'http://thinkprogress.org'
  follow_url_path: 'tag/'
  article_url_xpath: '//h2[contains(@class, "post__title")]//a'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@class="post__byline__author"]//a/text()'
      match_rule: 'concatenate'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//time[@class="post__date"]/@datetime'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="post__content"]'
      match_rule: 'single'

vox.com:
  site_name: 'vox.com'
  start_url: 'http://www.vox.com/policy-and-politics'
  follow_url_path: '/[users|authors]/'
  article_url_path: '\d\d\d\d/\d+/\d+/[\-a-z]*'
  method: 'index_page'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//meta[@property="author"]/@content'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="c-entry-content"]'
      match_rule: 'single'

westernjournal.org:
  site_name: 'westernjournal.org'
  start_url: 'https://www.westernjournal.com/politics/'
  follow_url_path: 'politics/'
  article_url_xpath: '//h1[@itemprop="headline"]'
  method: 'index_page'
  article_element: 'div'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//meta[@name="author"]/@content'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@property="article:published_time"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="entry-content"]'
      match_rule: 'single'

youngcons.com:
  site_name: 'youngcons.com'
  start_url: 'http://youngcons.com/category/politics/'
  follow_url_path: 'category/politics/page/'
  article_url_xpath: '//h3[contains(concat(" ", normalize-space(@class), " "), " entry-title ")]/a'
  metadata_source: 'microdata'
  method: 'index_page'
  article_element: 'div'
  article_class: 'td-post-content'
  article:
    title:
      select_method: 'xpath'
      select_expression: '//meta[@property="og:title"]/@content'
      match_rule: 'single'
    byline:
      select_method: 'xpath'
      select_expression: '//span[@itemprop="author"]/meta[@itemprop="name"]/@content'
      match_rule: 'single'
    publication_datetime:
      select_method: 'xpath'
      select_expression: '//meta[@itemprop="datePublished"]/@content'
      match_rule: 'single'
    content:
      select_method: 'xpath'
      select_expression: '//div[@class="td-post-content"]'
      match_rule: 'single'
